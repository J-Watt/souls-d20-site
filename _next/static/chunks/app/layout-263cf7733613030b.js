(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{296:(e,t,i)=>{"use strict";i.d(t,{L:()=>n});let n=(0,i(2115).createContext)({})},730:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});var n=i(5155),r=i(2115),a=i(7260),l=i(5239);function s(){let[e,t]=(0,r.useState)(0),[i,s]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),c=(0,a.usePathname)();return((0,r.useEffect)(()=>{let e=()=>d(window.innerWidth<1024);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{let e=()=>{let e=window.scrollY,i=document.documentElement.scrollHeight-window.innerHeight;t(e/i*100),s(i>0)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[]),!i||o&&("/map"===c||"/book"===c))?null:(0,n.jsx)("div",{className:"fixed right-2 top-20 h-[calc(100vh-5rem)] w-12 pointer-events-none z-30",children:(0,n.jsx)("div",{className:"absolute w-10 h-24 transition-transform duration-75",style:{top:"".concat(Math.min(e,100-96/(window.innerHeight-80)*100),"%"),transform:"translateY(0px)"},children:(0,n.jsx)(l.default,{src:"/images/scroller.png",alt:"Scroll indicator",width:40,height:96,className:"w-full h-full object-contain drop-shadow-md"})})})}},1290:()=>{},1402:(e,t,i)=>{"use strict";i.d(t,{s:()=>r});var n=i(3142);function r(e){return(0,n.G)(e)&&"offsetHeight"in e}},1408:(e,t,i)=>{"use strict";i.d(t,{N:()=>v});var n=i(5155),r=i(2115),a=i(296),l=i(4416),s=i(6553),o=i(9686),d=i(1402),c=i(3127);class h extends r.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,i=(0,d.s)(e)&&e.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u(e){let{children:t,isPresent:i,anchorX:a,root:l}=e,s=(0,r.useId)(),o=(0,r.useRef)(null),d=(0,r.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=(0,r.useContext)(c.Q);return(0,r.useInsertionEffect)(()=>{let{width:e,height:t,top:n,left:r,right:c}=d.current;if(i||!o.current||!e||!t)return;o.current.dataset.motionPopId=s;let h=document.createElement("style");u&&(h.nonce=u);let f=null!=l?l:document.head;return f.appendChild(h),h.sheet&&h.sheet.insertRule('\n          [data-motion-pop-id="'.concat(s,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===a?"left: ".concat(r):"right: ".concat(c),"px !important;\n            top: ").concat(n,"px !important;\n          }\n        ")),()=>{f.contains(h)&&f.removeChild(h)}},[i]),(0,n.jsx)(h,{isPresent:i,childRef:o,sizeRef:d,children:r.cloneElement(t,{ref:o})})}let f=e=>{let{children:t,initial:i,isPresent:a,onExitComplete:s,custom:d,presenceAffectsLayout:c,mode:h,anchorX:f,root:p}=e,g=(0,l.M)(m),x=(0,r.useId)(),v=!0,w=(0,r.useMemo)(()=>(v=!1,{id:x,initial:i,isPresent:a,custom:d,onExitComplete:e=>{for(let t of(g.set(e,!0),g.values()))if(!t)return;s&&s()},register:e=>(g.set(e,!1),()=>g.delete(e))}),[a,g,s]);return c&&v&&(w={...w}),(0,r.useMemo)(()=>{g.forEach((e,t)=>g.set(t,!1))},[a]),r.useEffect(()=>{a||g.size||!s||s()},[a]),"popLayout"===h&&(t=(0,n.jsx)(u,{isPresent:a,anchorX:f,root:p,children:t})),(0,n.jsx)(o.t.Provider,{value:w,children:t})};function m(){return new Map}var p=i(5601);let g=e=>e.key||"";function x(e){let t=[];return r.Children.forEach(e,e=>{(0,r.isValidElement)(e)&&t.push(e)}),t}let v=e=>{let{children:t,custom:i,initial:o=!0,onExitComplete:d,presenceAffectsLayout:c=!0,mode:h="sync",propagate:u=!1,anchorX:m="left",root:v}=e,[w,b]=(0,p.xQ)(u),y=(0,r.useMemo)(()=>x(t),[t]),j=u&&!w?[]:y.map(g),P=(0,r.useRef)(!0),M=(0,r.useRef)(y),N=(0,l.M)(()=>new Map),[E,S]=(0,r.useState)(y),[C,k]=(0,r.useState)(y);(0,s.E)(()=>{P.current=!1,M.current=y;for(let e=0;e<C.length;e++){let t=g(C[e]);j.includes(t)?N.delete(t):!0!==N.get(t)&&N.set(t,!1)}},[C,j.length,j.join("-")]);let O=[];if(y!==E){let e=[...y];for(let t=0;t<C.length;t++){let i=C[t],n=g(i);j.includes(n)||(e.splice(t,0,i),O.push(i))}return"wait"===h&&O.length&&(e=O),k(x(e)),S(y),null}let{forceRender:R}=(0,r.useContext)(a.L);return(0,n.jsx)(n.Fragment,{children:C.map(e=>{let t=g(e),r=(!u||!!w)&&(y===C||j.includes(t));return(0,n.jsx)(f,{isPresent:r,initial:(!P.current||!!o)&&void 0,custom:i,presenceAffectsLayout:c,mode:h,root:v,onExitComplete:r?void 0:()=>{if(!N.has(t))return;N.set(t,!0);let e=!0;N.forEach(t=>{t||(e=!1)}),e&&(null==R||R(),k(M.current),u&&(null==b||b()),d&&d())},anchorX:m,children:e},t)})})}},3127:(e,t,i)=>{"use strict";i.d(t,{Q:()=>n});let n=(0,i(2115).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},3142:(e,t,i)=>{"use strict";function n(e){return"object"==typeof e&&null!==e}i.d(t,{G:()=>n})},3577:(e,t,i)=>{"use strict";i.d(t,{B:()=>n});let n="undefined"!=typeof window},4416:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});var n=i(2115);function r(e){let t=(0,n.useRef)(null);return null===t.current&&(t.current=e()),t.current}},4652:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return o},getImageProps:function(){return s}});let n=i(8140),r=i(5040),a=i(1356),l=n._(i(1124));function s(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:l.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let o=a.Image},5239:(e,t,i)=>{"use strict";i.d(t,{default:()=>r.a});var n=i(4652),r=i.n(n)},5441:(e,t,i)=>{"use strict";i.d(t,{AnimationProvider:()=>s,s:()=>l});var n=i(5155),r=i(2115);let a=(0,r.createContext)(void 0);function l(){let e=(0,r.useContext)(a);if(void 0===e)throw Error("useAnimation must be used within an AnimationProvider");return e}function s(e){let{children:t}=e,[i,l]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("backgroundAnimation");null!==e&&l(JSON.parse(e))},[]),(0,n.jsx)(a.Provider,{value:{backgroundAnimationEnabled:i,toggleBackgroundAnimation:()=>{let e=!i;l(e),localStorage.setItem("backgroundAnimation",JSON.stringify(e))}},children:t})}},5601:(e,t,i)=>{"use strict";i.d(t,{xQ:()=>a});var n=i(2115),r=i(9686);function a(e=!0){let t=(0,n.useContext)(r.t);if(null===t)return[!0,null];let{isPresent:i,onExitComplete:l,register:s}=t,o=(0,n.useId)();(0,n.useEffect)(()=>{if(e)return s(o)},[e]);let d=(0,n.useCallback)(()=>e&&l&&l(o),[o,l,e]);return!i&&l?[!1,d]:[!0]}},6409:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,1290,23)),Promise.resolve().then(i.bind(i,5441)),Promise.resolve().then(i.bind(i,730)),Promise.resolve().then(i.bind(i,8320)),Promise.resolve().then(i.bind(i,9933)),Promise.resolve().then(i.t.bind(i,1356,23))},6553:(e,t,i)=>{"use strict";i.d(t,{E:()=>r});var n=i(2115);let r=i(3577).B?n.useLayoutEffect:n.useEffect},8320:(e,t,i)=>{"use strict";i.d(t,{default:()=>p});var n=i(5155),r=i(2619),a=i.n(r),l=i(5239),s=i(2115),o=i(1130),d=i(1408),c=i(5441);let h=[{href:"/info",label:"INFO"},{href:"/play",label:"PLAY"},{href:"/support",label:"SUPPORT"},{href:"/contact",label:"CONTACT"},{href:"/book",label:"BOOK"},{href:"/map",label:"MAP"}],u=[{href:"/",label:"HOME"},...h],f=h.slice(0,3),m=h.slice(3);function p(){let{backgroundAnimationEnabled:e,toggleBackgroundAnimation:t}=(0,c.s)(),[i,r]=(0,s.useState)(!1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:"sticky top-0 z-40 backdrop-blur bg-black/30 border-b border-white/10 overflow-visible",children:(0,n.jsxs)("nav",{className:"mx-auto max-w-6xl px-4 h-20 flex items-center justify-between relative",children:[(0,n.jsxs)("button",{onClick:()=>r(!i),className:"lg:hidden flex flex-col justify-center items-center w-8 h-8 space-y-1.5","aria-label":"Toggle navigation menu","aria-expanded":i,children:[(0,n.jsx)(o.P.span,{animate:i?{rotate:45,y:6}:{rotate:0,y:0},className:"block w-6 h-0.5 bg-white origin-center transition-all duration-300"}),(0,n.jsx)(o.P.span,{animate:i?{opacity:0}:{opacity:1},className:"block w-6 h-0.5 bg-white transition-all duration-300"}),(0,n.jsx)(o.P.span,{animate:i?{rotate:-45,y:-6}:{rotate:0,y:0},className:"block w-6 h-0.5 bg-white origin-center transition-all duration-300"})]}),(0,n.jsxs)("button",{onClick:t,className:"hidden lg:flex items-center gap-2 px-3 py-2 rounded text-sm hover:bg-white/10 transition-colors","aria-label":"".concat(e?"Disable":"Enable"," background animation"),title:"".concat(e?"Disable":"Enable"," background animation"),children:[(0,n.jsx)("div",{className:"w-3 h-3 rounded-full transition-colors ".concat(e?"bg-[color:var(--gold)]":"bg-gray-500")}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Animation"})]}),(0,n.jsxs)("ul",{className:"hidden lg:flex items-center gap-4 sm:gap-5 md:gap-6 text-base md:text-lg",children:[f.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(a(),{className:"rounded px-2 py-1 hover:bg-white/10",href:e.href,children:e.label})},e.href)),(0,n.jsx)("li",{className:"mx-2 md:mx-4 relative",children:(0,n.jsx)(a(),{href:"/","aria-label":"Souls D20 Home",className:"inline-flex relative z-50",children:(0,n.jsx)(l.default,{src:"/images/logos/SoulsD20 LOGO Color.png",alt:"Souls D20",width:240,height:60,priority:!0,className:"h-16 w-auto transform translate-y-2 drop-shadow-lg"})})}),m.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)(a(),{className:"rounded px-2 py-1 hover:bg-white/10",href:e.href,children:e.label})},e.href))]}),(0,n.jsx)("div",{className:"lg:hidden flex items-center flex-1 justify-center",children:(0,n.jsx)(a(),{href:"/","aria-label":"Souls D20 Home",className:"inline-flex",children:(0,n.jsx)(l.default,{src:"/images/logos/SoulsD20 Title Color.png",alt:"Souls D20",width:200,height:60,priority:!0,className:"h-12 w-auto"})})}),(0,n.jsx)("div",{className:"lg:hidden w-8"}),(0,n.jsx)("div",{className:"hidden lg:block w-[100px] sm:w-[120px]"})]})}),(0,n.jsx)(d.N,{children:i&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] bg-black/60 backdrop-blur-sm lg:hidden",onClick:()=>r(!1)}),(0,n.jsx)(o.P.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 left-0 h-full w-80 max-w-[85vw] z-[9999] bg-[#131313] border-r border-white/10 shadow-2xl lg:hidden",children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,n.jsx)(l.default,{src:"/images/logos/SoulsD20 Title Color.png",alt:"Souls D20",width:160,height:48,priority:!0,className:"h-12 w-auto"}),(0,n.jsx)("button",{onClick:()=>r(!1),className:"p-2 rounded-full hover:bg-white/10 transition-colors","aria-label":"Close navigation menu",children:(0,n.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,n.jsx)("nav",{className:"flex-1 px-6 py-8",children:(0,n.jsx)("ul",{className:"space-y-6",children:u.map((e,t)=>(0,n.jsx)(o.P.li,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:(0,n.jsx)(a(),{href:e.href,className:"block text-xl font-medium py-3 px-4 rounded-lg hover:bg-white/10 transition-colors",onClick:()=>r(!1),children:e.label})},e.href))})}),(0,n.jsx)("div",{className:"p-6 border-t border-white/10",children:(0,n.jsxs)("button",{onClick:()=>{t(),r(!1)},className:"flex items-center gap-3 w-full px-4 py-3 rounded-lg text-sm hover:bg-white/10 transition-colors","aria-label":"".concat(e?"Disable":"Enable"," background animation"),children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded-full transition-colors ".concat(e?"bg-[color:var(--gold)]":"bg-gray-500")}),(0,n.jsx)("span",{children:"Background Animation"}),(0,n.jsx)("span",{className:"ml-auto text-xs opacity-60",children:e?"ON":"OFF"})]})})]})})]})})]})}},9686:(e,t,i)=>{"use strict";i.d(t,{t:()=>n});let n=(0,i(2115).createContext)(null)},9933:(e,t,i)=>{"use strict";i.d(t,{default:()=>s});var n=i(5155),r=i(5441),a=i(2115);function l(e){let{enabled:t}=e,i=(0,a.useRef)(null),r=(0,a.useRef)(void 0),l=(0,a.useRef)([]),s=(0,a.useRef)(0),[o,d]=(0,a.useState)({width:0,height:0}),[c,h]=(0,a.useState)(!0),[u,f]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches||!document.createElement("canvas").getContext("2d"))return h(!1);/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&window.devicePixelRatio<2&&h(!1)})()},[]),(0,a.useEffect)(()=>{let e=()=>{f(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[]);let m=e=>{let t,i,n=Math.random();return n<.25?(t=Math.random()*e.width,i=-50):n<.5?(t=e.width+50,i=Math.random()*e.height):n<.75?(t=Math.random()*e.width,i=e.height+50):(t=-50,i=Math.random()*e.height),{x:t,y:i,vx:(Math.random()-.5)*.8,vy:(Math.random()-.5)*.8,opacity:0,maxOpacity:.2+.6*Math.random(),fadeInRate:.008+.012*Math.random(),fadeOutRate:.015+.025*Math.random(),size:1.5+4*Math.random(),angle:Math.random()*Math.PI*2,rotationSpeed:(Math.random()-.5)*.04,trailLength:8+12*Math.random(),trailPositions:[],lifePhase:"appearing",visibleTimer:0,distortion:.3+.7*Math.random(),pulseSpeed:.02+.03*Math.random()}},p=()=>{let e=i.current;if(!e||!t||!c||!u)return;let n=e.getContext("2d");if(n){var a;s.current+=16,((e,t,i)=>{let n=t.width/2,r=t.height/2;e.fillStyle="#0a0a0a",e.fillRect(0,0,t.width,t.height),[{centerX:.3*t.width,centerY:.3*t.height,radius:.8*Math.max(t.width,t.height),speed:3e-4,direction:1},{centerX:.7*t.width,centerY:.7*t.height,radius:.9*Math.max(t.width,t.height),speed:2e-4,direction:-1},{centerX:.5*t.width,centerY:.5*t.height,radius:1.2*Math.max(t.width,t.height),speed:1e-4,direction:1}].forEach((n,r)=>{let a=e.createRadialGradient(n.centerX,n.centerY,0,n.centerX,n.centerY,n.radius);n.speed,n.direction;let l=.05*Math.sin(5e-4*i+r);a.addColorStop(0,"#1a1a1a"),a.addColorStop(.2+l,"#0d0d0d"),a.addColorStop(.4+l,"#131313"),a.addColorStop(.7+l,"#0a0a0a"),a.addColorStop(1,"#050505"),e.save(),e.globalAlpha=.6,e.fillStyle=a,e.fillRect(0,0,t.width,t.height),e.restore()}),e.save(),e.globalAlpha=.1,e.strokeStyle="#2a2a2a",e.lineWidth=1;for(let t=0;t<5;t++){let a=(t+1)*100,l=5e-4*i*(t%2==0?1:-1);e.beginPath();for(let t=0;t<2*Math.PI;t+=.1){let s=n+Math.cos(t+l)*a*(1+.2*Math.sin(3*t+.001*i)),o=r+Math.sin(t+l)*a*(1+.2*Math.cos(3*t+.001*i));0===t?e.moveTo(s,o):e.lineTo(s,o)}e.closePath(),e.stroke()}e.restore()})(n,e,s.current),l.current.forEach(t=>{t.trailPositions.unshift({x:t.x,y:t.y,opacity:1}),t.trailPositions.length>t.trailLength&&t.trailPositions.pop(),t.trailPositions.forEach((e,i)=>{e.opacity=Math.max(0,1-i/t.trailLength)}),t.angle+=t.rotationSpeed;let i=.3*Math.sin(5e-4*s.current+t.angle);t.vx+=.02*Math.cos(t.angle+i),t.vy+=.02*Math.sin(t.angle+i),t.vx+=(Math.random()-.5)*.01,t.vy+=(Math.random()-.5)*.01,t.x+=t.vx,t.y+=t.vy,t.vx*=.985,t.vy*=.985,"appearing"===t.lifePhase?(t.opacity+=t.fadeInRate,t.opacity>=t.maxOpacity&&(t.lifePhase="visible",t.visibleTimer=180+240*Math.random())):"visible"===t.lifePhase?(t.visibleTimer--,t.visibleTimer<=0&&(t.lifePhase="fading")):"fading"===t.lifePhase&&(t.opacity-=t.fadeOutRate),t.opacity<=0&&.005>Math.random()&&Object.assign(t,m(e)),t.x<-200&&(t.x=e.width+200),t.x>e.width+200&&(t.x=-200),t.y<-200&&(t.y=e.height+200),t.y>e.height+200&&(t.y=-200)}),a=l.current,s.current,a.forEach(e=>{if(!(e.opacity<=0)){if(e.trailPositions.length>1){n.save();for(let t=1;t<e.trailPositions.length;t++){let i=e.trailPositions[t],r=i.opacity*e.opacity*.3;if(r>.01){n.globalAlpha=r;let t=n.createRadialGradient(i.x,i.y,0,i.x,i.y,2*e.size);t.addColorStop(0,"#e0e0e0"),t.addColorStop(1,"transparent"),n.fillStyle=t,n.beginPath(),n.arc(i.x,i.y,1.5*e.size,0,2*Math.PI),n.fill()}}n.restore()}n.restore()}}),r.current=requestAnimationFrame(p)}},g=()=>{d({width:window.innerWidth,height:window.innerHeight})};return((0,a.useEffect)(()=>{let e;g();let t=()=>{clearTimeout(e),e=setTimeout(g,150)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),clearTimeout(e)}},[]),(0,a.useEffect)(()=>{let e=i.current;if(e)return e.width=o.width,e.height=o.height,l.current=Array.from({length:o.width<768?10:18},()=>m(e)),t&&c&&p(),()=>{r.current&&cancelAnimationFrame(r.current)}},[o,t,c,u]),t&&c)?(0,n.jsx)("canvas",{ref:i,className:"fixed top-0 left-0 pointer-events-none z-0",style:{width:"100vw",height:"100vh",display:"block"},width:o.width,height:o.height}):null}function s(){let{backgroundAnimationEnabled:e}=(0,r.s)();return(0,n.jsx)(l,{enabled:e})}}},e=>{e.O(0,[741,356,130,619,441,255,358],()=>e(e.s=6409)),_N_E=e.O()}]);