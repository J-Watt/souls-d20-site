(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{296:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});let r=(0,n(2115).createContext)({})},1252:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>H});var r=n(5155),o=n(2115);function l(e,t){return Object.freeze({...e,...t})}let u=(0,o.createContext)(null);function i(){let e=(0,o.use)(u);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}var s=n(5027),a=n.n(s);let c=(0,o.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:r,className:l,id:i,placeholder:a,style:c,whenReady:f,zoom:d,...p},m){let[h]=(0,o.useState)({className:l,id:i,style:c}),[g,x]=(0,o.useState)(null),v=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(m,()=>g?.map??null,[g]);let y=(0,o.useCallback)(r=>{if(null!==r&&!v.current){let o=new s.Map(r,p);v.current=o,null!=n&&null!=d?o.setView(n,d):null!=e&&o.fitBounds(e,t),null!=f&&o.whenReady(f),x(Object.freeze({__version:1,map:o}))}},[]);(0,o.useEffect)(()=>()=>{g?.map.remove()},[g]);let b=g?o.createElement(u,{value:g},r):a??null;return o.createElement("div",{...h,ref:y},b)});function f(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function d(e,t){var n,r;return n=null==t?function(t,n){let r=(0,o.useRef)(void 0);return r.current||(r.current=e(t,n)),r}:function(n,r){let l=(0,o.useRef)(void 0);l.current||(l.current=e(n,r));let u=(0,o.useRef)(n),{instance:i}=l.current;return(0,o.useEffect)(function(){u.current!==n&&(t(i,n,u.current),u.current=n)},[i,n,t]),l},r=function(e){var t;let r=i(),l=n(function(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}(e,r),r);return!function(e,t){let n=(0,o.useRef)(t);(0,o.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}(r.map,e.attribution),!function(e,t){let n=(0,o.useRef)(void 0);(0,o.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}(l.current,e.eventHandlers),t=l.current,(0,o.useEffect)(function(){return(r.layerContainer??r.map).addLayer(t.instance),function(){r.layerContainer?.removeLayer(t.instance),r.map.removeLayer(t.instance)}},[r,t]),l},(0,o.forwardRef)(function(e,t){let{instance:n,context:l}=r(e).current;(0,o.useImperativeHandle)(t,()=>n);let{children:i}=e;return null==i?null:o.createElement(u,{value:l},i)})}n(7650);let p=d(function({bounds:e,url:t,...n},r){let o=new s.ImageOverlay(t,e,n);return f(o,l(r,{overlayContainer:o}))},function(e,t,n){if(t.bounds instanceof s.LatLngBounds&&t.bounds!==n.bounds&&e.setBounds(t.bounds),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=t.zIndex&&t.zIndex!==n.zIndex&&e.setZIndex(t.zIndex),t.bounds!==n.bounds){let n=t.bounds instanceof s.LatLngBounds?t.bounds:new s.LatLngBounds(t.bounds);e.setBounds(n)}t.url!==n.url&&e.setUrl(t.url)}),m=d(function({position:e,...t},n){let r=new s.Marker(e,t);return f(r,l(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())});function h(){return i().map}n(5603);var g=n(7909),x=n(296),v=n(4416),y=n(6553),b=n(9686),C=n(1402),E=n(3127);class w extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,n=(0,C.s)(e)&&e.offsetWidth||0,r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft,r.right=n-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function z(e){let{children:t,isPresent:n,anchorX:l,root:u}=e,i=(0,o.useId)(),s=(0,o.useRef)(null),a=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=(0,o.useContext)(E.Q);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:r,left:o,right:f}=a.current;if(n||!s.current||!e||!t)return;s.current.dataset.motionPopId=i;let d=document.createElement("style");c&&(d.nonce=c);let p=null!=u?u:document.head;return p.appendChild(d),d.sheet&&d.sheet.insertRule('\n          [data-motion-pop-id="'.concat(i,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            ").concat("left"===l?"left: ".concat(o):"right: ".concat(f),"px !important;\n            top: ").concat(r,"px !important;\n          }\n        ")),()=>{p.contains(d)&&p.removeChild(d)}},[n]),(0,r.jsx)(w,{isPresent:n,childRef:s,sizeRef:a,children:o.cloneElement(t,{ref:s})})}let j=e=>{let{children:t,initial:n,isPresent:l,onExitComplete:u,custom:i,presenceAffectsLayout:s,mode:a,anchorX:c,root:f}=e,d=(0,v.M)(I),p=(0,o.useId)(),m=!0,h=(0,o.useMemo)(()=>(m=!1,{id:p,initial:n,isPresent:l,custom:i,onExitComplete:e=>{for(let t of(d.set(e,!0),d.values()))if(!t)return;u&&u()},register:e=>(d.set(e,!1),()=>d.delete(e))}),[l,d,u]);return s&&m&&(h={...h}),(0,o.useMemo)(()=>{d.forEach((e,t)=>d.set(t,!1))},[l]),o.useEffect(()=>{l||d.size||!u||u()},[l]),"popLayout"===a&&(t=(0,r.jsx)(z,{isPresent:l,anchorX:c,root:f,children:t})),(0,r.jsx)(b.t.Provider,{value:h,children:t})};function I(){return new Map}var L=n(5601);let R=e=>e.key||"";function k(e){let t=[];return o.Children.forEach(e,e=>{(0,o.isValidElement)(e)&&t.push(e)}),t}let M=e=>{let{children:t,custom:n,initial:l=!0,onExitComplete:u,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:c="left",root:f}=e,[d,p]=(0,L.xQ)(a),m=(0,o.useMemo)(()=>k(t),[t]),h=a&&!d?[]:m.map(R),g=(0,o.useRef)(!0),b=(0,o.useRef)(m),C=(0,v.M)(()=>new Map),[E,w]=(0,o.useState)(m),[z,I]=(0,o.useState)(m);(0,y.E)(()=>{g.current=!1,b.current=m;for(let e=0;e<z.length;e++){let t=R(z[e]);h.includes(t)?C.delete(t):!0!==C.get(t)&&C.set(t,!1)}},[z,h.length,h.join("-")]);let M=[];if(m!==E){let e=[...m];for(let t=0;t<z.length;t++){let n=z[t],r=R(n);h.includes(r)||(e.splice(t,0,n),M.push(n))}return"wait"===s&&M.length&&(e=M),I(k(e)),w(m),null}let{forceRender:O}=(0,o.useContext)(x.L);return(0,r.jsx)(r.Fragment,{children:z.map(e=>{let t=R(e),o=(!a||!!d)&&(m===z||h.includes(t));return(0,r.jsx)(j,{isPresent:o,initial:(!g.current||!!l)&&void 0,custom:n,presenceAffectsLayout:i,mode:s,root:f,onExitComplete:o?void 0:()=>{if(!C.has(t))return;C.set(t,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(null==O||O(),I(b.current),a&&(null==p||p()),u&&u())},anchorX:c,children:e},t)})})},O=(0,g.default)(()=>Promise.all([n.e(130),n.e(179)]).then(n.bind(n,3179)),{loadableGenerated:{webpack:()=>[3179]},ssr:!1}),S=[1224,2370],P=[[0,0],[4608,6144]],B=[{id:"gil-othrond",name:"Gil Othrond",pos:[1269,3193],img:"/images/landmarks/Gil Othrond.jpg",text:"The Capital of the Empire, the seat of power and commerce. Golden and everyone gazing at the Erd Tree"},{id:"mirro",name:"Mirro",pos:[2470,2585],img:"/images/landmarks/Mirro.jpg",text:"Lake city of the Sunless Isle"},{id:"upper-halloe",name:"Upper Halloe",pos:[986,912],img:"/images/landmarks/Upper Halloe.jpg",text:"Island City near Umyss Keep where the ancient dragon, by the name of Umyss, according to tale resides"},{id:"nocstend",name:"Nocstend",pos:[1631,1868],img:"/images/landmarks/Nocstend.jpg",text:"The major city of the Forest of Stars and home of the Noctpriest and their Orthodoxy"}];function H(){var e;let t=(0,o.useRef)(null),[n,l]=(0,o.useState)(null),[u,i]=(0,o.useState)(null);return(0,r.jsxs)("div",{ref:t,className:"relative rounded-2xl overflow-hidden shadow-soft w-full",style:{height:"80vh"},children:[(0,r.jsxs)(c,{crs:a().CRS.Simple,center:S,zoom:0,zoomControl:!0,scrollWheelZoom:!0,style:{height:"100%",width:"100%"},maxBounds:P,maxBoundsViscosity:1,wheelPxPerZoomLevel:120,zoomSnap:.25,zoomDelta:.25,children:[(0,r.jsx)(p,{url:"/map/SD20WorldMap.jpg",bounds:P}),B.map(e=>{let t;return(0,r.jsx)(m,{position:{lat:(t=e.pos)[0],lng:t[1]},icon:a().divIcon({html:'<div class="golden-marker"></div>',className:"custom-marker-container",iconSize:[24,24],iconAnchor:[12,12]}),eventHandlers:{click:t=>{let n=t.target._map.latLngToContainerPoint(t.latlng);l({id:e.id,title:e.name,body:e.text,img:e.img,latlng:t.latlng}),i({x:n.x,y:n.y})}}},e.id)}),(0,r.jsx)(N,{bounds:P,startCenter:S,zoomOutExtra:1,zoomInExtra:2,defaultZoomOffset:-.25}),(0,r.jsx)(Z,{active:!!n,latlng:null!=(e=null==n?void 0:n.latlng)?e:null,onRecalc:e=>i(e)}),(0,r.jsx)(U,{onDismiss:()=>l(null)})]}),(0,r.jsx)(M,{children:n&&u&&(0,r.jsx)(O,{x:u.x,y:u.y,title:n.title,body:n.body,imgSrc:n.img,onClose:()=>l(null)})})]})}function N(e){let{bounds:t,startCenter:n,zoomOutExtra:r,zoomInExtra:l,defaultZoomOffset:u}=e,i=h();return(0,o.useEffect)(()=>{let e=i.getBoundsZoom(t,!0);i.setMinZoom(e-r),i.setMaxZoom(e+l),i.setMaxBounds(t),i.setView(n,e+u,{animate:!1})},[i,t,n,r,l,u]),null}function Z(e){let{active:t,latlng:n,onRecalc:r}=e,l=h();return(0,o.useEffect)(()=>{if(!t||!n)return void r(null);let e=()=>{let e=l.latLngToContainerPoint(n);r({x:e.x,y:e.y})};return e(),l.on("move zoom resize",e),()=>{l.off("move zoom resize",e)}},[t,n,l,r]),null}function U(e){let{onDismiss:t}=e;return!function(e){let t=h();(0,o.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e])}({click:()=>t()}),null}},1402:(e,t,n)=>{"use strict";n.d(t,{s:()=>o});var r=n(3142);function o(e){return(0,r.G)(e)&&"offsetHeight"in e}},3127:(e,t,n)=>{"use strict";n.d(t,{Q:()=>r});let r=(0,n(2115).createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"})},3142:(e,t,n)=>{"use strict";function r(e){return"object"==typeof e&&null!==e}n.d(t,{G:()=>r})},3577:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});let r="undefined"!=typeof window},4416:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(2115);function o(e){let t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}},5601:(e,t,n)=>{"use strict";n.d(t,{xQ:()=>l});var r=n(2115),o=n(9686);function l(e=!0){let t=(0,r.useContext)(o.t);if(null===t)return[!0,null];let{isPresent:n,onExitComplete:u,register:i}=t,s=(0,r.useId)();(0,r.useEffect)(()=>{if(e)return i(s)},[e]);let a=(0,r.useCallback)(()=>e&&u&&u(s),[s,u,e]);return!n&&u?[!1,a]:[!0]}},5603:()=>{},6553:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r=n(2115);let o=n(3577).B?r.useLayoutEffect:r.useEffect},9686:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});let r=(0,n(2115).createContext)(null)}}]);