"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[179],{3179:(e,t,l)=>{l.r(t),l.d(t,{default:()=>s});var i=l(5155),a=l(1130),n=l(2115);function s(e){var t;let{x:l,y:s,title:r,body:o,imgSrc:c,onClose:d}=e,[h,u]=(0,n.useState)(!1),[f,x]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=()=>u(window.innerWidth<1024);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(c&&h){let e=new Image;e.onload=()=>{x({width:e.naturalWidth,height:e.naturalHeight})},e.src=c}},[c,h]);let m=()=>{if(!h||!f)return null;let e=f.height/f.width,t=Math.min(200,window.innerWidth-64),l=t*e;return l>150?{width:150/e,height:150}:{width:t,height:l}};return(0,i.jsxs)(a.P.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.18},className:"absolute z-[500] pointer-events-auto",style:(()=>{if(!h)return{left:l,top:s,transform:"translate(-50%, -110%)"};let e=m(),t=(null==e?void 0:e.width)||320,i=document.querySelector(".leaflet-container");return{left:Math.max(16,Math.min(l-t/2,((null==i?void 0:i.clientWidth)||window.innerWidth)-t-16)),top:Math.max(16,s-((null==e?void 0:e.height)||150)-100),transform:"none"}})(),children:[(0,i.jsxs)("div",{className:"bg-theme-surface/95 border border-white/10 rounded-2xl shadow-soft overflow-hidden ".concat(h?"flex flex-col":"flex w-[30rem] h-[12.5rem]"),style:h?{width:(null==(t=m())?void 0:t.width)||200,maxHeight:"60vh"}:{},children:[(0,i.jsx)("div",{className:"bg-black/30 flex-shrink-0 ".concat(h?"":"w-[12.5rem] h-[12.5rem]"),style:h&&m()||{},children:c?(0,i.jsx)("img",{src:c,alt:r,className:"".concat(h?"w-full h-full object-contain":"w-full h-full object-cover"),loading:"lazy"}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs opacity-60",children:"No image"})}),(0,i.jsxs)("div",{className:"flex flex-col ".concat(h?"flex-1 min-h-0":"flex-1 h-full"),children:[(0,i.jsxs)("div",{className:"flex items-start justify-between gap-2 p-3 flex-shrink-0",children:[(0,i.jsx)("h3",{className:"font-semibold leading-tight ".concat(h?"text-base":"text-lg"),children:r}),(0,i.jsx)("button",{onClick:d,className:"rounded-md px-2 py-1 text-xs bg-white/10 hover:bg-white/20 flex-shrink-0","aria-label":"Close",children:"\xd7"})]}),(0,i.jsx)("div",{className:"flex-1 overflow-y-auto px-3 pb-3 min-h-0",children:(0,i.jsx)("p",{className:"opacity-80 leading-relaxed ".concat(h?"text-xs":"text-sm"),children:o})})]})]}),!h&&(0,i.jsx)("div",{className:"w-3 h-3 rotate-45 bg-theme-surface/95 border-l border-t border-white/10 mx-auto",style:{marginTop:"-6px"}})]})}}}]);